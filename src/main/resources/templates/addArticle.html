<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>添加页面</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}"/>
    <link rel="stylesheet" href="css/bootstrap-responsive.min.css" th:href="@{/css/bootstrap-responsive.min.css}" />
    <link rel="stylesheet" href="css/colorpicker.css" th:href="@{/css/colorpicker.css}" />
    <link rel="stylesheet" href="css/datepicker.css" th:href="@{/css/datepicker.css}" />
    <link rel="stylesheet" href="css/uniform.css" th:href="@{/css/uniform.css}" />
    <link rel="stylesheet" href="css/select2.css" th:href="@{/css/select2.css}" />
    <link rel="stylesheet" href="css/matrix-style.css" th:href="@{/css/matrix-style.css}" />
    <link rel="stylesheet" href="css/matrix-media.css" th:href="@{/css/matrix-media.css}" />
    <link rel="stylesheet" href="css/bootstrap-wysihtml5.css" th:href="@{/css/bootstrap-wysihtml5.css}" />
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet" th:href="@{/font-awesome/css/font-awesome.css}" />
    <link rel="stylesheet" href="plug/kindeditor/themes/default/default.css" th:href="@{/plug/kindeditor/themes/default/default.css}" />
    <link rel="stylesheet" href="plug/kindeditor/plugins/code/prettify.css" th:href="@{/plug/kindeditor/plugins/code/prettify.css}" />
    <link rel="stylesheet" href="plug/datetimepicker/css/bootstrap-datetimepicker.css" th:href="@{/plug/datetimepicker/css/bootstrap-datetimepicker.css}" />
</head>
<body>
<div th:replace="commons/bar::topbar"></div>
<div th:replace="commons/bar::leftbar"></div>
<div id="content">
    <div id="content-header" >
        <div id="breadcrumb"> <a href="#" th:href="@{/api/queryArticleMapByPage}" class="tip-bottom">文章管理</a> <a href="#" class="current">文章添加/修改</a> </div>
        <h1>文章添加/修改</h1>
    </div>
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span12">
                <div class="widget-box" id="myModal">
                    <div class="widget-title" > <span class="icon"> <i class="icon-align-justify"></i> </span>
                        <h5>文章添加</h5>
                    </div>
                    <div class="widget-content nopadding">
                        <form action="#" th:action="@{/api/addArticle}"  method="post" class="form-horizontal">
                            <input type="hidden" name="_method" value="put" th:if="${article!=null}"/>
                            <input type="hidden" name="article_id" th:if="${article!=null}" th:value="${article.article_id}" />
                            <div class="control-group">
                                <label class="control-label">新闻标题 :</label>
                                <div class="controls">
                                    <input type="text" class="span11" name="article_title" th:value="${article!=null}? ${article.article_title}" />
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">新闻类别 :</label>
                                <div class="controls">
                                   <!-- <select id="nav_id" class="form-control she_mai1"  style="width:10%"></select>-->
                                    <select id="nav_id"   name="nav_id"   autocomplete="off" >
                                        <!--<option value=''>==请选择新闻类别==</option>-->
                                            <!--selected='selected'-->
                                            <option th:each="nav:${navs}" th:value="${nav!=null}? ${nav.nav_id}" th:text="${nav.nav_name}"></option>
                                    </select>
                                   <!-- <input type="text" class="span11"  name="lastName" th:value="${article!=null}? ${article.lastName}" />-->
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">发布时间 :</label>
                                <div class="controls">
                                    <input id="article_date"  class="form-control" name="article_date"
                                           autocomplete="off" maxlength="20" type="text"
                                           th:value="${article!=null}? ${article.article_date}"/>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">新闻正文 :</label>
                                <div class="controls">
                                    <textarea id="article_content"  class="span11" th:text="${article!=null}? ${article.article_content}" name="article_content"  style="width:680px;height:400px;" ></textarea>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-success btn_edit" th:text="${article!=null}?'修改':'添加'">添加</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div></div>
<script src="js/jquery.min.js" th:src="@{/js/jquery.min.js}"></script>
<script src="js/jquery.ui.custom.js" th:src="@{/js/jquery.ui.custom.js}"></script>
<script src="js/bootstrap.min.js" th:src="@{/js/bootstrap.min.js}"></script>
<script src="js/bootstrap-colorpicker.js" th:src="@{/js/bootstrap-colorpicker.js}"></script>
<script src="js/bootstrap-datepicker.js" th:src="@{/js/bootstrap-datepicker.js}"></script>
<script src="js/jquery.toggle.buttons.html" th:src="@{/js/jquery.toggle.buttons.html}"></script>
<script src="js/masked.js" th:src="@{/js/masked.js}"></script>
<script src="js/jquery.uniform.js" th:src="@{/js/jquery.uniform.js}"></script>
<script src="js/select2.min.js" th:src="@{/js/select2.min.js}"></script>
<script src="js/matrix.js" th:src="@{/js/matrix.js}"></script>
<script src="js/matrix.form_common.js" th:src="@{/js/matrix.form_common.js}"></script>
<script src="js/wysihtml5-0.3.0.js" th:src="@{/js/wysihtml5-0.3.0.js}"></script>
<script src="js/jquery.peity.min.js" th:src="@{/js/jquery.peity.min.js}"></script>
<script src="js/bootstrap-wysihtml5.js" th:src="@{/js/bootstrap-wysihtml5.js}"></script>
<script src="plug/kindeditor/kindeditor-all-min.js" th:src="@{/plug/kindeditor/kindeditor-all-min.js}" ></script>
<script src="plug/kindeditor/lang/zh-CN.js"th:src="@{/plug/kindeditor/lang/zh-CN.js}" ></script>
<script src="plug/kindeditor/plugins/code/prettify.js" th:src="@{/plug/kindeditor/plugins/code/prettify.js}" ></script>
<script src="plug/datetimepicker/js/bootstrap-datetimepicker.js" th:src="@{/plug/datetimepicker/js/bootstrap-datetimepicker.js}"  type="text/javascript"></script>
<script>
    $('#article_date').datetimepicker({
        language:"ja", //语言选择日文 注：旧版本 新版方法：$.datetimepicker.setLocale('ch');
        format:"yyyy-mm-dd",      //格式化日期
        startView: 2, //这里就设置了默认视图为年视图
        minView: 2, //设置最小视图为年视图
        todayBtn : true, //当天日期按钮
        todayHighlight:true //高亮当前日期。
    })

    $('.textarea_editor').wysihtml5();
    KindEditor.ready(function(K) {
        var editor1 = K.create('textarea[name="article_content"]', {
            cssPath : 'plug/kindeditor/plugins/code/prettify.css',
            /* uploadJson : 'common/upload_json.jsp',
             fileManagerJson : 'common/file_manager_json.jsp',*/
            allowFileManager : true,
            afterBlur:function(){
                this.sync();
            },
            afterCreate : function() {
                var self = this;
                K.ctrl(document, 13, function() {
                    self.sync();
                    document.forms['frm'].submit();
                });
                K.ctrl(self.edit.doc, 13, function() {
                    self.sync();
                    document.forms['frm'].submit();
                });
            }
        });
        prettyPrint();
    });
</script>

</body>
</html>